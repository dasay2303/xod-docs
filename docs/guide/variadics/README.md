---
title: Variadic Nodes
---

# Variadic Nodes

Существуют операции, которые можно применять к произвольному количеству 
входных значений. Например, рассмотрим операцию сложения. Конечно, вы 
интуитивно знаете, как это работает для двух значений, трех значений или 42 значений:

1 + 6 = 7
1 + 6 + 3 = 10
1 + 6 + 3 +… больше слагаемых… = какое-то число
Другие примеры таких функций включают в себя умножение чисел, конкатенацию 
или объединение строк, логическое «И» или «ИЛИ», выбор n-го элемента и так далее.

Для естественной поддержки таких операций XOD предлагает механизм, называемый 
узлами с переменными координатами . Узлы Variadic могут масштабировать 
количество своих входных контактов, чтобы принимать больше или меньше значений.

В XOD IDE вариационные узлы имеют небольшой захват справа, а штифты, которые могут
масштабироваться, отмечены многоточием (⋯) при наведении курсора мыши. Перетащите 
правую границу узла, чтобы добавить столько групп выводов, сколько вам нужно.
![Overview](./overview.patch.png)

Счетчик репликации вариационных пинов называется called _arity level_. По 
умолчанию уровень арности для узла равен 1. При добавлении контакта, например, к
multiply узлу, уровень арности становится равным 2 и т. Д.

## Расширение

Разработчик узла с вариадическим кодом отвечает только за создание 
реализации узла для первого уровня арности. Все последующие реализации 
уровня арности автоматически инициируются XOD. Чтобы достичь этого, при
передаче программы каждый конкретный вариационный узел проходит этап 
расширения, на котором система заменяет его каскадом примитивных узлов
уровня 1. Принцип замены лучше проиллюстрирован на примере.

![Expansion](./expansion.patch.png)

<div class="ui segment note">
<span class="ui ribbon label">профессионал</span>
Разработчики с опытом функционального программирования могут заметить, 
что расширение - это не что иное, как операция уменьшения / сгиба. 
Верно! Варианты XOD работают через свертывание списка входных значений.
</div>

## Bigger arity steps

В приведенных выше примерах узлы имеют ровно один вариационный штифт. 
Это не всегда так. Узлы могут иметь два или три стержня с переменным углом. 
Примером такого узла явлется [`select`](/libs/xod/core/select/).Каждый раз, 
когда вы увеличиваете уровень арности `select` узла, он получает два 
дополнительных входных контакта.

![Select node with arity step 2](./select-a2.patch.png)

Формально говоря, число входных контактов Variadic, которые реплицируются 
вместе в группе, называется _arity step_.

Процесс расширения для узлов с шагом арности больше единицы выглядит аналогично.

![Select node expansion](./select-a2-expansion.patch.png)

## Общие контакты

Когда вариационный узел имеет больше входных данных, чем необходимо для его 
расширения, крайние левые посторонние выводы распределяются между всеми узлами 
в каскаде.

Например, рассмотрим операцию соединения текстовой строки, которая объединяет 
входные строки, помещая между ними указанный разделитель (например, пробел или запятую). 
Разделитель будет использоваться всеми развернутыми узлами, поэтому вы 
получите ожидаемый результат.

![Join node expansion](./join-expansion.patch.png)

В приведенном выше примере был один общий контакт. Однако, может быть больше, 
если автор решил, что узел будет таким.

---

Как пользователь узла, вы редко будете размышлять о том, какие контакты являются 
общими, а какие нет. Шаблон использования должен быть довольно очевидным из обозначения узла.

Правильно расставить булавки - головоломка для создателя узла. Прочитайте обо всех правилах и 
нюансах, если вы хотите [создать новый вариационный узел](../creating-variadics/) самостоятельно.
